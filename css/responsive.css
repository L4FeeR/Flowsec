/* Responsive Design for Mobile Devices */
/* This file makes Flowsec work perfectly on phones and tablets */

/* ============================================
   MOBILE STYLES (Phones - up to 768px)
   ============================================ */

@media screen and (max-width: 768px) {
    /* Chat Container - Full screen on mobile */
    .chat-container {
        flex-direction: column;
        height: 100vh;
        height: 100dvh; /* Dynamic viewport height for mobile browsers */
    }

    /* Sidebar - Toggle visibility on mobile */
    .sidebar {
        position: fixed;
        left: -100%;
        top: 0;
        width: 80%;
        max-width: 320px;
        height: 100vh;
        z-index: 1000;
        transition: left 0.3s ease;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
    }

    .sidebar.active {
        left: 0;
    }

    /* Mobile Menu Toggle Button */
    .mobile-menu-toggle {
        display: flex !important;
        position: fixed;
        top: 15px;
        left: 15px;
        z-index: 999;
        background: var(--primary-color, #4CAF50);
        color: white;
        border: none;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .mobile-menu-toggle.sidebar-open {
        left: calc(80% - 30px);
        background: var(--danger-color, #f44336);
    }

    /* Overlay when sidebar is open */
    .sidebar-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }

    .sidebar-overlay.active {
        display: block;
    }

    /* Main Chat Area */
    .main-chat {
        width: 100%;
        flex: 1;
    }

    /* Chat Header - Adjust for mobile menu button */
    .chat-header {
        padding: 15px 15px 15px 60px;
        flex-wrap: wrap;
    }

    .chat-header-left {
        flex: 1;
        min-width: 0;
    }

    .chat-header h2 {
        font-size: 18px;
    }

    .chat-actions {
        gap: 8px;
    }

    .btn-logout-main {
        padding: 8px 12px;
        font-size: 14px;
    }

    .btn-logout-main span {
        display: none; /* Hide text, show only icon on mobile */
    }

    /* Messages Area */
    .messages {
        padding: 15px 10px;
        height: calc(100vh - 180px);
        height: calc(100dvh - 180px);
    }

    .message {
        max-width: 85%;
        padding: 10px 12px;
        font-size: 14px;
    }

    .message-text {
        word-break: break-word;
    }

    .message-time {
        font-size: 11px;
    }

    /* Message Input Area */
    .message-input-container {
        padding: 10px;
        gap: 8px;
    }

    #message-input {
        font-size: 14px;
        padding: 10px 12px;
    }

    .btn-send {
        width: 45px;
        height: 45px;
        padding: 0;
    }

    .btn-attach {
        width: 40px;
        height: 40px;
        padding: 0;
    }

    /* User List in Sidebar */
    .user-list {
        max-height: calc(100vh - 280px);
    }

    .user-item {
        padding: 12px 15px;
    }

    .user-item img {
        width: 45px;
        height: 45px;
    }

    .user-item h4 {
        font-size: 15px;
    }

    .user-item p {
        font-size: 13px;
    }

    /* User Profile Card */
    .user-profile-card {
        padding: 15px;
    }

    .user-avatar {
        width: 50px;
        height: 50px;
    }

    .user-info h3 {
        font-size: 16px;
    }

    .user-info p {
        font-size: 13px;
    }

    /* Sidebar Header */
    .sidebar-header {
        padding: 15px;
    }

    .sidebar-header .logo {
        font-size: 20px;
    }

    .sidebar-header .btn-icon {
        width: 35px;
        height: 35px;
        font-size: 16px;
    }

    /* Search Bar */
    .search-bar {
        padding: 10px 15px;
    }

    .search-bar input {
        padding: 10px 35px 10px 12px;
        font-size: 14px;
    }

    /* Settings Modal */
    .settings-modal {
        width: 95%;
        max-width: 95%;
        height: 90vh;
        max-height: 90vh;
        margin: 5vh auto;
    }

    .settings-content {
        padding: 15px;
    }

    .settings-section {
        padding: 15px;
    }

    /* File Messages */
    .file-message {
        max-width: 85%;
    }

    .file-preview {
        padding: 12px;
    }

    .file-info h4 {
        font-size: 14px;
    }

    .file-info p {
        font-size: 12px;
    }

    .virus-total-result {
        padding: 10px;
        font-size: 12px;
    }

    /* File Manager Page */
    .file-manager-container {
        padding: 15px 10px;
    }

    .file-manager-header h1 {
        font-size: 22px;
    }

    .file-grid {
        grid-template-columns: 1fr; /* Single column on mobile */
        gap: 12px;
    }

    .file-card {
        padding: 15px;
    }

    /* Session Management */
    .sessions-container {
        padding: 15px 10px;
        margin: 20px auto;
    }

    .sessions-header h1 {
        font-size: 22px;
    }

    .session-card {
        flex-direction: column;
        gap: 15px;
        padding: 15px;
    }

    .session-info {
        width: 100%;
    }

    .session-device {
        font-size: 16px;
        flex-wrap: wrap;
    }

    .session-details {
        font-size: 13px;
    }

    .session-actions {
        width: 100%;
        justify-content: stretch;
    }

    .btn-revoke {
        flex: 1;
        padding: 10px;
    }

    .btn-back {
        padding: 8px 12px;
        font-size: 14px;
    }

    .btn-revoke-all {
        width: 100%;
        padding: 12px;
    }

    /* Auth Pages (Login, Signup) */
    .auth-container {
        padding: 20px 15px;
    }

    .auth-box {
        padding: 25px 20px;
        width: 100%;
        max-width: 100%;
    }

    .auth-header h1 {
        font-size: 24px;
    }

    .auth-form input,
    .auth-form select {
        padding: 12px;
        font-size: 14px;
    }

    .auth-form button {
        padding: 12px;
        font-size: 15px;
    }

    /* Encryption Warning Modal */
    .encryption-modal-content {
        width: 95%;
        max-width: 95%;
        padding: 20px;
    }

    .encryption-modal-content h2 {
        font-size: 20px;
    }

    .encryption-modal-content button {
        padding: 12px 20px;
        font-size: 14px;
    }

    /* Debug Panel */
    .debug-panel {
        width: 95%;
        max-width: 95%;
        font-size: 12px;
    }

    /* Hide desktop-only elements */
    .desktop-only {
        display: none !important;
    }
}

/* ============================================
   TABLET STYLES (768px - 1024px)
   ============================================ */

@media screen and (min-width: 769px) and (max-width: 1024px) {
    .sidebar {
        width: 280px;
    }

    .main-chat {
        flex: 1;
    }

    .message {
        max-width: 75%;
    }

    .file-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .settings-modal {
        width: 90%;
        max-width: 700px;
    }

    .session-card {
        padding: 18px;
    }

    .mobile-menu-toggle {
        display: none !important;
    }
}

/* ============================================
   LARGE SCREENS (Desktop - 1024px+)
   ============================================ */

@media screen and (min-width: 1025px) {
    /* Desktop styles - everything stays as is */
    .mobile-menu-toggle {
        display: none !important;
    }

    .sidebar-overlay {
        display: none !important;
    }

    /* Hide mobile-only elements */
    .mobile-only {
        display: none !important;
    }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Show/hide based on screen size */
.show-mobile {
    display: none;
}

@media screen and (max-width: 768px) {
    .show-mobile {
        display: block;
    }
    
    .hide-mobile {
        display: none !important;
    }
}

/* Prevent text selection on touch devices */
@media (hover: none) and (pointer: coarse) {
    .btn-icon,
    .user-item,
    .file-card {
        -webkit-tap-highlight-color: transparent;
    }
}

/* Improve touch targets on mobile */
@media screen and (max-width: 768px) {
    button,
    a,
    .user-item,
    .message {
        min-height: 44px; /* Apple's recommended minimum touch target */
    }
}

/* Safe area padding for notched phones (iPhone X+) */
@supports (padding: max(0px)) {
    @media screen and (max-width: 768px) {
        .chat-header,
        .message-input-container {
            padding-left: max(15px, env(safe-area-inset-left));
            padding-right: max(15px, env(safe-area-inset-right));
        }
        
        .message-input-container {
            padding-bottom: max(10px, env(safe-area-inset-bottom));
        }
    }
}
